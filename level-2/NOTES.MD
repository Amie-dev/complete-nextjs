
# â­ NEXT.JS APP ROUTER â€” FULL DEEP NOTES

*(page.js, layout.js, dynamic routes, catch-all, client/server components, route groups, parallel routes, special files)*

---

# ğŸ”¥ 1. What is `page.js` or `page.jsx`?

### â–º Definition

`page.js` (or `page.jsx`) is the **entry point for a route** in the Next.js App Router.

Every folder with a `page.js` becomes a URL.

### â–º Example

```
app/page.js         â†’  domain.com/
app/about/page.js   â†’  domain.com/about
app/blog/page.js    â†’  domain.com/blog
```

### â–º Characteristics

* Server Component by default
* Loads fast
* Supports async/await
* SEO-friendly because rendered on server
* Must export default React component

### â–º Example Code

```jsx
export default function About() {
  return <h1>About Page</h1>;
}
```

### `.js` vs `.jsx` difference?

**NO difference in Next.js functionality.**
`page.jsx` just gives JSX syntax highlighting.
Use whichever you prefer.

---

# ğŸ”¥ 2. What is `layout.js` or `layout.jsx`?

### â–º Definition

A `layout.js` is a **UI wrapper** that surrounds all pages and nested routes inside that folder.

### â–º Purpose

* Reusable UI
* Shared navigation
* Shared header & footer
* Shared sidebar
* Common styling
* Renders **once** and persists during navigation

### â–º Must include `{children}`

Because the child pages render inside layout.

Example:

```jsx
export default function Layout({ children }) {
  return (
    <html lang="en">
      <body>
        <Header />
        {children}  {/* every page will appear here */}
        <Footer />
      </body>
    </html>
  );
}
```

---

# ğŸ”¥ 3. GLOBAL LAYOUT vs FOLDER LAYOUT

### âœ” Global Layout â†’ `app/layout.js`

* Applies to the entire application
* Loads once
* Used for: Navbar, Footer, global CSS, theme

### âœ” Folder Layout â†’ `app/dashboard/layout.js`

* Applies **only inside that folder**
* Perfect for: dashboards, admin panel UI, nested layouts

Example:

```
app/dashboard/layout.js â†’ only wraps dashboard pages
app/dashboard/page.js
app/dashboard/settings/page.js
```

---

# ğŸ”¥ 4. Routing System in Next.js (App Router)

Next.js uses **File-based Routing**
â†’ Folders = Routes
â†’ Files inside folder = Special behaviors

Example:

```
app/products/page.js â†’ /products
app/products/new/page.js â†’ /products/new
```

No React Router needed.

---

# ğŸ”¥ 5. Nested Routes

Folder-level nesting automatically creates nested URLs.

Example:

```
app/dashboard/settings/profile/page.js
```

URL:

```
/dashboard/settings/profile
```

No config required.

---

# ğŸ”¥ 6. Dynamic Routes

Dynamic Routes allow variable URL segments like:

* `/blog/react-hooks`
* `/user/aminul`
* `/products/123`

### â–º How to create dynamic route

Wrap the folder name in brackets:

```
app/blog/[slug]/page.js
```

### â–º Example URL

```
/blog/next-js-routing
```

### â–º Params object

```js
params = { slug: "next-js-routing" };
```

---

# ğŸ”¥ 6.1 Dynamic Routes in SERVER COMPONENTS

In App Router, the `params` prop is a **promise**, not an object.

So you **must use async/await**.

Example:

```jsx
export default async function BlogPage({ params }) {
  const { slug } = await params;
  return <h1>Blog: {slug}</h1>;
}
```

### Why params is a promise?

Because server components fetch data before rendering.

---

# ğŸ”¥ 6.2 Dynamic Routes in CLIENT COMPONENTS

Client components cannot use server-style async params.

You use:

```jsx
'use client';
import { useParams } from 'next/navigation';

export default function BlogPage() {
  const { slug } = useParams();
  return <h1>Blog: {slug}</h1>;
}
```

### Why useParams() is needed?

Because client components cannot access serverâ€™s async params.

---

# ğŸ”¥ 7. Catch-all Routes `[...slug]`

These match **infinite nested segments**.

### Folder:

```
app/shop/[...slug]/page.js
```

### Matches:

```
/shop/books
/shop/books/fiction
/shop/books/fiction/english
/shop/books/fiction/english/horror
```

### Params:

```
{ slug: ["books", "fiction", "english"] }
```

Use when you need recursive page levels.

---

# ğŸ”¥ 8. Optional Catch-All Routes `[[...slug]]`

Matches **everything INCLUDING the root route**.

Folder:

```
app/shop/[[...slug]]/page.js
```

### Matches:

```
/shop               â† root included âœ“
/shop/shoes
/shop/shoes/men
/shop/shoes/men/loafers
```

### Difference:

| Type          | Matches /shop? | Matches nested? |
| ------------- | -------------- | --------------- |
| `[...slug]`   | âŒ No           | âœ” Yes           |
| `[[...slug]]` | âœ” Yes          | âœ” Yes           |

Optional catch-all is more flexible.

---

# ğŸ”¥ 9. Route Groups `(folder-name)`

Route groups organize files **without affecting the URL**.

Folder name wrapped in parentheses is ignored in the route path.

Example:

```
app/(marketing)/about/page.js â†’ /about
app/(dashboard)/settings/page.js â†’ /settings
```

Used for:

* Folder organization
* Splitting layouts
* Managing complex apps

---

# ğŸ”¥ 10. Parallel Routes

Parallel routes let you render **multiple pages at the same time** inside layouts.

Used for:

* Dashboards
* Multi-section pages
* Conversational UI
* Preview vs Editor panels

### Syntax:

```
app/@team/page.js
app/@analytics/page.js
```

The `@slotname` tells Next.js that this is a parallel route.

Example layout:

```jsx
export default function Layout({ team, analytics }) {
  return (
    <div>
      <div>{team}</div>
      <div>{analytics}</div>
    </div>
  );
}
```

---

# ğŸ”¥ 11. Special Next.js Files (VERY IMPORTANT)

NEXt.js App Router gives 10 special files:

### 1ï¸âƒ£ `page.js`

Main page.

### 2ï¸âƒ£ `layout.js`

UI wrapper for all child routes.

### 3ï¸âƒ£ `loading.js`

Loading UI while server component fetches data.

```jsx
export default function Loading() {
  return <p>Loading...</p>;
}
```

### 4ï¸âƒ£ `not-found.js`

404 page for that route.

### 5ï¸âƒ£ `error.js`

Error boundaryâ€”catches JS errors.

### 6ï¸âƒ£ `global-error.js`

Global error handler.

### 7ï¸âƒ£ `template.js`

Like layout, but **re-renders every time**.

Use for:

* Animations
* Page transitions

### 8ï¸âƒ£ `route.js`

Built-in backend API route.

Example:

```
app/api/users/route.js â†’ /api/users
```

Code:

```jsx
export async function GET() {
  return Response.json({ name: "Aminul" });
}
```

### 9ï¸âƒ£ `default.js`

Fallback for parallel routes.

### ğŸ”Ÿ `head.js` (Optional in older versions)

Used for page-level metadata.

---

# ğŸ¯ FINAL FULL SUMMARY

## â­ Files

| File            | Purpose                  |
| --------------- | ------------------------ |
| page.js         | The actual page (route)  |
| layout.js       | Wrapper for nested pages |
| loading.js      | Skeleton Loader          |
| not-found.js    | Route 404                |
| error.js        | Route error boundary     |
| global-error.js | App-wide error boundary  |
| template.js     | Re-rendered layout       |
| route.js        | API backend endpoint     |
| default.js      | Parallel route fallback  |

## â­ Routing

* Normal routes
* Nested routes
* Dynamic routes `[slug]`
* Catch-all `[...slug]`
* Optional catch-all `[[...slug]]`
* Route groups `(folder)`
* Parallel routes `@slot`

## â­ Components

* Server Components â†’ default, async params
* Client Components â†’ use `useParams()`, `useState`, `useEffect`

---